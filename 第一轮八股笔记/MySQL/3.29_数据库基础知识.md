# 数据库基本知识

### 基本概念

1、数据库 数据库管理系统 数据库系统 数据库管理员

​      数据库、数据表、模式、列、行、主键

2、元组,码, 候选码,主码,外码,主属性,非主属性

3、ER图：实体（矩形） 字段（椭圆）、关系（菱形）

4、数据库范式：

* ```txt
  第一范式：
  第二范式：
  第三范式：
  区别，
  常见面试题：
  主键和外键的区别，为什么不用外键
  ```

5、存储过程概念，优点，为什么不用

6、drop truncate delete概念、用法和区别（内容，是否回滚）

* ```TXT
  drop 删除表的结构和内容，结构删除后，表就不存在了
  truncate 删除表的内容，只是清空不会删除表的结构；如果在插入，自增id从1开始
  delete 删除表的内容，可以带where语句删除具体哪一行，不会删除表的结构
  drop和truncate 属于DDL 不可回滚
  delete 属于DML， 可以回滚；事务提交后才生效
  
  一般来说：速度上drop 》 truncate 》 delete，但是delete可以回滚，有日志，较安全
  ”“”
  Rollback Segment：在数据库管理系统中，一个rollback segment是一块专门的存储区域，用于存储已经提交但尚未持久化到数据库文件中的数据修改操作。这些数据修改操作包括insert、update、delete等。
  
  事务：数据库中的事务是一系列数据库操作，被视为一个单独的逻辑单元，并且要么全部执行成功，要么全部失败回滚。事务通过BEGIN TRANSACTION开始，通过COMMIT TRANSACTION提交，或者通过ROLLBACK TRANSACTION回滚。
  
  提交事务：当执行一个事务时，所有的数据修改操作可能都会被记录到rollback segment中，而不会立即应用到数据库文件中。只有在执行COMMIT TRANSACTION提交事务之后，这些修改才会被写入数据库文件，从而实际地改变了数据库中的数据。如果在事务提交之前发生了错误或者执行了ROLLBACK TRANSACTION，那么rollback segment中的数据修改会被撤销，数据库中的数据状态会回滚到事务开始之前的状态。
  
  所以，当说一个操作"放到 rollback segment 中，事务提交之后才生效"时，意味着该操作对数据库的修改并不会立即生效，而是在事务提交时才会实际应用到数据库中。
  “”“
  
  ```

7、数据库设计步骤：

* 分析需求、概念结构设计（画ER图）、逻辑结构设计（ER图转为表，主键外键设置等）、物理结构设计（选择合适的存储结构和存取路径：硬盘内存，索引创建等）、数据库实施（编程、测试和运行）、运行和维护

# MySQL

1、mysql基本概念：一种关系型数据库，开源免费，默认端口是3306

* 优点：成熟稳定、功能完善；开源免费；
* 事务支持优秀， InnoDB 存储引擎默认使用 REPEATABLE-READ 并不会有任何性能损失，并且，InnoDB 实现的 REPEATABLE-READ 隔离级别其实是可以解决幻读问题发生的。
* 支持分库分表、读写分离、高可用

2、字段类型

* ![image-20240329134135083](C:/Users/WSJ/Desktop/JAVA%E5%85%AB%E8%82%A1%E5%87%86%E5%A4%87%EF%BC%8812.16%EF%BC%89/%E7%AC%AC%E4%B8%80%E8%BD%AE%E5%85%AB%E8%82%A1%E7%AC%94%E8%AE%B0/MySQL/3.29_%E6%95%B0%E6%8D%AE%E5%BA%93%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86.assets/image-20240329134135083.png)

* TINYINT通常使用1个字节存储，范围是-128到127（有符号）或0到255（无符号）。
* SMALLINT通常使用2个字节存储，范围是-32768到32767（有符号）或0到65535（无符号）。
* MEDIUMINT通常使用3个字节存储，范围是-8388608到8388607（有符号）或0到16777215（无符号）。
* INT通常使用4个字节存储，范围是-2147483648到2147483647（有符号）或0到4294967295（无符号）。
* BIGINT通常使用8个字节存储，范围是-9223372036854775808到9223372036854775807（有符号）或0到18446744073709551615（无符号）。
* **浮点型**：
  - FLOAT：单精度浮点数，大约可以在7位有效数字的范围内表示。
  - DOUBLE：双精度浮点数，大约可以在15位有效数字的范围内表示。
* **定点型**：
  - DECIMAL：精确的定点数值，根据数据库系统的不同，可以支持不同的精度和范围。
* **字符串类型**：
  - CHAR和VARCHAR：根据定义的长度限制，可以存储不同长度的字符串。
  - TINYTEXT、TEXT、MEDIUMTEXT和LONGTEXT：分别具有较大的最大长度限制，可以存储大量的文本数据。
  - TINYBLOB、BLOB、MEDIUMBLOB和LONGBLOB：分别具有较大的最大长度限制，可以存储大量的二进制数据。
* **日期时间类型**：
  - YEAR：通常用于存储年份，范围取决于具体实现。
  - TIME：精确到秒，范围通常为00:00:00到23:59:59。
  - DATE：存储日期，范围取决于具体实现。
  - DATETIME和TIMESTAMP：精确到秒，范围通常取决于具体实现，但DATETIME通常范围更广，可以存储更早或更晚的日期时间

3、整数类型的Unsigned属性有什么用？

* 不需要存储负值，可以将正整数的上限提高一倍，对于从0开始递增的列比较合适

4、char和varchar（每个都只占用一个字符（存储大小根据字符集确定））的区别

* char是定长字符串，varchar是不定长字符串
* CHAR 在存储时会在右边填充空格以达到指定的长度，检索时会去掉空格；
* VARCHAR 在存储时需要使用 1 或 2 个额外字节记录字符串的长度，检索时不需要处理
* 所以 char适合存储长度较短和长度差不多的字符串，因为长度不一，会以长度最长的字符长度来定义大小；例如 Bcrypt 算法、MD5 算法加密后的密码、身份证号码。
* VARCHAR 类型适合存储长度不确定或者差异较大的字符串，例如用户昵称、文章标题等。
* 一个字符的存储空间根据字符集算的，UTF-8编码下一个汉字(包括中文形式下的符号)一般是3个字节，一个英文(包括英文下的符号)1个字节，一个数字1个字节。汉字复杂偏僻的更多，有4个字节

5、VARCHAR(100)和 VARCHAR(10)区别是什么

* 可存储的长度不一样；如果存储相同的字符串，存储空间一样；但是放在内存里面，100的占用内存更大，这是使用了定义时候声明的大小100分类内存，比如排序就是按照100个长度进行的

6、DECIMAL和 FLOAT 的区别是：

* **DECIMAL 是定点数，FLOAT/DOUBLE 是浮点数。DECIMAL 可以存储精确的小数值，FLOAT/DOUBLE 只能存储近似的小数值。**

7、NULL和‘ ’的区别是什么

* NULL代表一个不确定的值，‘ ’的长度为0，不占用空间
* `NULL` 代表一个不确定的值,就算是两个 `NULL`,它俩也不一定相等。例如，`SELECT NULL=NULL`的结果为 false，但是在我们使用`DISTINCT`,`GROUP BY`,`ORDER BY`时,`NULL`又被认为是相等的。
* `''`的长度是 0，是不占用空间的，而`NULL` 是需要占用空间的。
* `NULL` 会影响聚合函数的结果。例如，`SUM`、`AVG`、`MIN`、`MAX` 等聚合函数会忽略 `NULL` 值。 `COUNT` 的处理方式取决于参数的类型。如果参数是 `*`(`COUNT(*)`)，则会统计所有的记录数，包括 `NULL` 值；如果参数是某个字段名(`COUNT(列名)`)，则会忽略 `NULL` 值，只统计非空值的个数。
* 查询 `NULL` 值时，必须使用 `IS NULL` 或 `IS NOT NULLl` 来判断，而不能使用 =、!=、 <、> 之类的比较运算符。而`''`是可以使用这些比较运算符的





